{"title":"JS Web API (新版)","date":"2020-03-27T00:00:00.000Z","date_formatted":{"ll":"Mar 27, 2020","L":"03/27/2020","MM-DD":"03-27"},"thumbnail":"https://blog-1251959181.cos.accelerate.myqcloud.com/hack2.jpg","link":"2020/03/26/imooc_115_2_new","comments":true,"tags":["Front-end","JavaScript","Note"],"categories":["Coding","imooc"],"updated":"2024-07-01T17:57:02.534Z","content":"<p><strong><a href=\"https://www.imooc.com/\" target=\"_blank\">慕课网</a>实战课程笔记 —— <a href=\"https://coding.imooc.com/class/115.html\" target=\"_blank\">BAT大牛带你横扫初级前端JavaScript面试（第二版）</a></strong></p>\n<h2 id=\"知识体系\">知识体系<a title=\"#知识体系\" href=\"#知识体系\"></a></h2>\n<div class=\"φbu φbx\">\n<details>\n<summary>JS基础语法</summary>\n<ul>\n<details>\n<summary>变量类型和计算</summary>\n<ul>\n<li>值类型和引用类型</li>\n<li>类型判断</li>\n<li>逻辑运算</li>\n</details>\n</li>\n<details>\n<summary>原型和原型链</summary>\n<ul>\n<li>class</li>\n<li>继承</li>\n<li>原型</li>\n<li>原型链</li>\n<li>instanceof</li>\n</details>\n</li>\n<details>\n<summary>作用域和闭包</summary>\n<ul>\n<li>作用域</li>\n<li>自由变量</li>\n<li>闭包</li>\n<li>this</li>\n</details>\n</li>\n<details>\n<summary>异步</summary>\n<ul>\n<li>单线程</li>\n<li>callback</li>\n<li>应用场景</li>\n<li>Promise</li>\n</details>\n</li>\n<details>\n<summary>模块化</summary>\n<ul>\n<li>ES6 Module</li>\n</details>\n</li>\n</ul>\n</li>\n<details>\n<summary>JS-Web-API</summary>\n<ul>\n<details>\n<summary>DOM</summary>\n<ul>\n<li>树形结构</li>\n<li>节点操作</li>\n<li>属性</li>\n<li>树结构操作</li>\n<li>性能</li>\n</details>\n</li>\n<details>\n<summary>BOM</summary>\n<ul>\n<li>navigator</li>\n<li>screen</li>\n<li>location</li>\n<li>history</li>\n</details>\n</li>\n<details>\n<summary>事件</summary>\n<ul>\n<li>绑定</li>\n<li>冒泡</li>\n<li>代理</li>\n</details>\n</li>\n<details>\n<summary>ajax</summary>\n<ul>\n<li>XML HttpRequest</li>\n<li>状态码</li>\n<li>跨域</li>\n</details>\n</li>\n<details>\n<summary>存储</summary>\n<ul>\n<li>cookie</li>\n<li>localStorage</li>\n<li>sessionStorage</li>\n</details>\n</li>\n</ul>\n</li>\n<details>\n<summary>开发环境</summary>\n<ul>\n<li>git</li>\n<li>调试</li>\n<li>webpack 和 babel</li>\n<li>Linux命令</li>\n</details>\n</li>\n<details>\n<summary>运行环境</summary>\n<ul>\n<details>\n<summary>页面加载</summary>\n<ul>\n<li>加载</li>\n<li>渲染</li>\n</details>\n</li>\n<details>\n<summary>性能优化</summary>\n<ul>\n<li>加载资源优化</li>\n<li>渲染优化</li>\n</details>\n</li>\n<details>\n<summary>安全</summary>\n<ul>\n<li>xss</li>\n<li>CSRF</li>\n</details>\n</li>\n</ul>\n</li>\n</ul>\n</div><h2 id=\"一、dom-document-object-model\">一、DOM Document Object Model<a title=\"#一、dom-document-object-model\" href=\"#一、dom-document-object-model\"></a></h2>\n<ul>\n<li>vue 和 React 框架应用广泛，封装了 DOM 操作</li>\n<li>但 DOM 操作一直都会是前端工程师的基础、必备知识</li>\n<li>只会 vue 而不懂 DOM 操作的前端程序员，不会长久</li>\n</ul>\n<h3 id=\"面试题\">面试题<a title=\"#面试题\" href=\"#面试题\"></a></h3>\n<ol>\n<li><strong>DOM 是哪种数据结构</strong> DOM 树</li>\n<li><strong>DOM 操作的常用API</strong>\n<ol>\n<li>DOM 节点操作</li>\n<li>DOM 结构操作</li>\n</ol>\n</li>\n<li><strong>attr 和 property 的区别</strong>\n<ol>\n<li>property: 修改对象属性，不会体现到 html 结构中</li>\n<li>attribute: 修改 html 属性，会改变 html 结构</li>\n<li>两者都有可能引起 DOM 重新渲染，尽量使用 property</li>\n</ol>\n</li>\n<li><strong>一次性插入多个 DOM 节点，考虑性能</strong></li>\n</ol>\n<h3 id=\"1、dom-本质\">1、DOM 本质<a title=\"#1、dom-本质\" href=\"#1、dom-本质\"></a></h3>\n<p>xml：可扩展的语言，可以描述任何结构的数据<br>\n浏览器把拿到的 html 代码结构化成一个浏览器能识别并且 js 可操作的一个模型<br>\n数据结构：<strong>树</strong></p>\n<h3 id=\"2、dom-节点操作\">2、DOM 节点操作<a title=\"#2、dom-节点操作\" href=\"#2、dom-节点操作\"></a></h3>\n<ul>\n<li>获取 DOM 节点</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> div1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;div1&#x27;</span>)  <span class=\"comment\">// 元素</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> divList = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementByTagName</span>(<span class=\"string\">&#x27;div&#x27;</span>)   <span class=\"comment\">// 集合</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> containerList = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementByClassName</span>(<span class=\"string\">&#x27;.container&#x27;</span>)    <span class=\"comment\">// 集合</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> pList = <span class=\"variable language_\">document</span>.<span class=\"title function_\">quertySelectorAll</span>(<span class=\"string\">&#x27;p.text&#x27;</span>) <span class=\"comment\">// 集合</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>property: 获取 js 对象的属性</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> pList = <span class=\"variable language_\">document</span>.<span class=\"title function_\">quertySelectorAll</span>(<span class=\"string\">&#x27;p&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = pList[<span class=\"number\">0</span>]</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(p.<span class=\"property\">style</span>.<span class=\"property\">width</span>)  <span class=\"comment\">// 获取样式</span></span><br><span class=\"line\">p.<span class=\"property\">style</span>.<span class=\"property\">width</span> = <span class=\"string\">&#x27;100px&#x27;</span>     <span class=\"comment\">// 修改样式</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(p.<span class=\"property\">className</span>)    <span class=\"comment\">// 获取 class</span></span><br><span class=\"line\">p.<span class=\"property\">className</span> = <span class=\"string\">&#x27;p1&#x27;</span>          <span class=\"comment\">// 修改 class</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(p.<span class=\"property\">nodeName</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(p.<span class=\"property\">nodeType</span>)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>Attribute: 获取 html 标签中定义的属性，如内联样式表</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> pList = <span class=\"variable language_\">document</span>.<span class=\"title function_\">quertySelectorAll</span>(<span class=\"string\">&#x27;p&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = pList[<span class=\"number\">0</span>]</span><br><span class=\"line\">p.<span class=\"title function_\">getAttribute</span>(<span class=\"string\">&#x27;data-name&#x27;</span>)</span><br><span class=\"line\">p.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&#x27;data-name&#x27;</span>, <span class=\"string\">&#x27;imooc&#x27;</span>)</span><br><span class=\"line\">p.<span class=\"title function_\">getAttribute</span>(<span class=\"string\">&#x27;style&#x27;</span>)</span><br><span class=\"line\">p.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&#x27;style&#x27;</span>, <span class=\"string\">&#x27;font-size:30px;&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<p>在修改时尽量修改property</p>\n<h3 id=\"3、dom-结构操作\">3、DOM 结构操作<a title=\"#3、dom-结构操作\" href=\"#3、dom-结构操作\"></a></h3>\n<ul>\n<li>新增节点</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> div1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;div1&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// 添加新节点</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> p1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&#x27;p&#x27;</span>)</span><br><span class=\"line\">p1.<span class=\"property\">innerHTML</span> = <span class=\"string\">&#x27;this is p1&#x27;</span></span><br><span class=\"line\">div1.<span class=\"title function_\">appendChild</span>(p1) <span class=\"comment\">// 添加新创建的元素</span></span><br><span class=\"line\"><span class=\"comment\">// 移动已有节点</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> p2 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;p2&#x27;</span>)</span><br><span class=\"line\">div1.<span class=\"title function_\">appendChild</span>(p2)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>获取父元素</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> div1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;div1&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> parent = div1.<span class=\"property\">parentElement</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>获取子元素</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> div1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;div1&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> child = div1.<span class=\"property\">childNodes</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>删除节点</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> div1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;div1&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> child = div1.<span class=\"property\">childNodes</span></span><br><span class=\"line\">div1.<span class=\"title function_\">removeChild</span>(child[<span class=\"number\">0</span>])</span><br></pre></td></tr></table></figure>\n<h3 id=\"4、dom-性能\">4、DOM 性能<a title=\"#4、dom-性能\" href=\"#4、dom-性能\"></a></h3>\n<p>DOM 操作非常“昂贵”，避免频繁的 DOM 操作<br>\n对 DOM 查询做缓存</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&#x27;p&#x27;</span>).<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 每次循环都会计算 length, 频繁进行 DOM 查询</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 缓存 DOM 查询结果</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> pList = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&#x27;p&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> length = pList.<span class=\"property\">length</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; length; i++) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 缓存 length, 只进行一次 DOM 查询</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>将频繁操作改为一次性操作</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> listNode = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsById</span>(<span class=\"string\">&#x27;list&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// 创建一个文档片段，此时还没有插入到 DOM 树中</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> frag = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createDocumentFragment</span>()</span><br><span class=\"line\"><span class=\"comment\">// 执行插入</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; x &lt; <span class=\"number\">10</span>; x++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> li = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;li&quot;</span>)</span><br><span class=\"line\">  li.<span class=\"property\">innerHTML</span> = <span class=\"string\">&quot;List item&quot;</span> + x</span><br><span class=\"line\">  frag.<span class=\"title function_\">appendChild</span>(li)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 都完成后再插入到 DOM 树中</span></span><br><span class=\"line\">listNode.<span class=\"title function_\">appendChild</span>(frag)</span><br></pre></td></tr></table></figure>\n<h2 id=\"二、bom\">二、BOM<a title=\"#二、bom\" href=\"#二、bom\"></a></h2>\n<h3 id=\"面试题-1\">面试题<a title=\"#面试题-1\" href=\"#面试题-1\"></a></h3>\n<ol>\n<li><strong>如何检测浏览器的类型</strong></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> ua = navigator.<span class=\"property\">userAgent</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> isChrome = ua.<span class=\"title function_\">indexOf</span>(<span class=\"string\">&#x27;Chrome&#x27;</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(isChrome)</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li><strong>如何拆解 url 的各部分</strong></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">href</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">protocol</span>) <span class=\"comment\">// &#x27;http:&#x27; &#x27;https:&#x27;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">host</span>) <span class=\"comment\">// &#x27;coding.imooc.com&#x27;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">pathname</span>) <span class=\"comment\">// &#x27;/lesson/115&#x27;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">search</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">hash</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"1、navigator\">1、navigator<a title=\"#1、navigator\" href=\"#1、navigator\"></a></h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> ua = navigator.<span class=\"property\">userAgent</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> isChrome = ua.<span class=\"title function_\">indexOf</span>(<span class=\"string\">&#x27;Chrome&#x27;</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(isChrome)</span><br></pre></td></tr></table></figure>\n<h3 id=\"2、screen\">2、screen<a title=\"#2、screen\" href=\"#2、screen\"></a></h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(screen.<span class=\"property\">width</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(screen.<span class=\"property\">height</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"3、location\">3、location<a title=\"#3、location\" href=\"#3、location\"></a></h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">href</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">protocol</span>) <span class=\"comment\">// &#x27;http:&#x27; &#x27;https:&#x27;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">host</span>) <span class=\"comment\">// &#x27;coding.imooc.com&#x27;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">pathname</span>) <span class=\"comment\">// &#x27;/lesson/115&#x27;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">search</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">hash</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"4、history\">4、history<a title=\"#4、history\" href=\"#4、history\"></a></h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">history.<span class=\"title function_\">back</span>()</span><br><span class=\"line\">history.<span class=\"title function_\">forward</span>()</span><br></pre></td></tr></table></figure>\n<h2 id=\"三、事件绑定\">三、事件绑定<a title=\"#三、事件绑定\" href=\"#三、事件绑定\"></a></h2>\n<h3 id=\"面试题-2\">面试题<a title=\"#面试题-2\" href=\"#面试题-2\"></a></h3>\n<ol>\n<li><strong>编写一个通用的事件监听函数</strong></li>\n<li><strong>描述 DOM 事件冒泡流程</strong></li>\n<li><strong>无限下拉的图片列表，如何监听每个图片的点击</strong></li>\n</ol>\n<h3 id=\"1、事件绑定\">1、事件绑定<a title=\"#1、事件绑定\" href=\"#1、事件绑定\"></a></h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 原生事件绑定</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> btn = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;btn1&#x27;</span>)</span><br><span class=\"line\">btn.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">event</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;clicked&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 通用事件绑定</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">bindEvent</span>(<span class=\"params\">elem, type, fn</span>) &#123;</span><br><span class=\"line\">    elem.<span class=\"title function_\">addEventListener</span>(type, fn)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;link1&#x27;</span>)</span><br><span class=\"line\"><span class=\"title function_\">bindEvent</span>(a, <span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">    e.<span class=\"title function_\">preventDefault</span>() <span class=\"comment\">// 阻止默认行为</span></span><br><span class=\"line\">    <span class=\"title function_\">alert</span>(<span class=\"string\">&#x27;clicked&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 完善通用事件绑定，加入事件代理</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">bindEvent</span>(<span class=\"params\">elem, type, selector, fn</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (fn == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        fn = selector</span><br><span class=\"line\">        selector = <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    elem.<span class=\"title function_\">addEventListener</span>(type, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> target</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (selector) &#123;</span><br><span class=\"line\">            target = e.<span class=\"property\">target</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (target.<span class=\"title function_\">matches</span>(selector)) &#123;</span><br><span class=\"line\">                fn.<span class=\"title function_\">call</span>(target, e)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"title function_\">fn</span>(e)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"2、事件冒泡\">2、事件冒泡<a title=\"#2、事件冒泡\" href=\"#2、事件冒泡\"></a></h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;div1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p1&quot;</span>&gt;</span>激活<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p2&quot;</span>&gt;</span>取消<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p3&quot;</span>&gt;</span>取消<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p4&quot;</span>&gt;</span>取消<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;div2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p5&quot;</span>&gt;</span>取消<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p6&quot;</span>&gt;</span>取消<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">var</span> p1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;p1&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">var</span> body = <span class=\"variable language_\">document</span>.<span class=\"property\">body</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"title function_\">bindEvent</span>(p1, <span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    e.<span class=\"title function_\">stopPropatation</span>() <span class=\"comment\">// 注释掉这一行，来体会事件冒泡</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">alert</span>(<span class=\"string\">&#x27;激活&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"title function_\">bindEvent</span>(body, <span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">alert</span>(<span class=\"string\">&#x27;取消&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"3、事件代理\">3、事件代理<a title=\"#3、事件代理\" href=\"#3、事件代理\"></a></h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;div1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>a1<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>a2<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>a3<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>a4<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span>&gt;</span>点击增加一个 a 标签<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">var</span> div1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;div1&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">div1.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">var</span> target = e.<span class=\"property\">target</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">if</span> (e.<span class=\"property\">nodeName</span> === <span class=\"string\">&#x27;A&#x27;</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">alert</span>(target.<span class=\"property\">innerHTML</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"四、ajax\">四、ajax<a title=\"#四、ajax\" href=\"#四、ajax\"></a></h2>\n<h3 id=\"面试题-3\">面试题<a title=\"#面试题-3\" href=\"#面试题-3\"></a></h3>\n<ol>\n<li><strong>手写一个简易的 ajax</strong></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">ajax</span>(<span class=\"params\">url</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> xhr = <span class=\"keyword\">new</span> <span class=\"title class_\">XMLHttpRequest</span>()</span><br><span class=\"line\">    xhr.<span class=\"title function_\">open</span>(<span class=\"string\">&#x27;GET&#x27;</span>, url, <span class=\"literal\">true</span>)</span><br><span class=\"line\">    xhr.<span class=\"property\">onreadystatechange</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (xhr.<span class=\"property\">readyState</span> === <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (xhr.<span class=\"property\">status</span> === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">resolve</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(xhr.<span class=\"property\">responseText</span>))</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (xhr.<span class=\"property\">status</span> === <span class=\"number\">404</span>) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">reject</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&#x27;404 not found&#x27;</span>))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    xhr.<span class=\"title function_\">send</span>(<span class=\"literal\">null</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> url = <span class=\"string\">&#x27;/data/test.json&#x27;</span></span><br><span class=\"line\"><span class=\"title function_\">ajax</span>(url)</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res))</span><br><span class=\"line\">  .<span class=\"title function_\">catch</span>(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">errer</span>(err))</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li><strong>跨域的几种实现方式</strong>\n<ul>\n<li>JSONP</li>\n<li>CORS (服务器端设置 http header)</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"1、xmlhttprequest\">1、XMLHttpRequest<a title=\"#1、xmlhttprequest\" href=\"#1、xmlhttprequest\"></a></h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> <span class=\"title class_\">XMLHttpRequest</span>()</span><br><span class=\"line\">xhr.<span class=\"title function_\">open</span>(<span class=\"string\">&quot;GET&quot;</span>, <span class=\"string\">&quot;/api&quot;</span>, <span class=\"literal\">true</span>) <span class=\"comment\">// true: 异步; false: 同步</span></span><br><span class=\"line\">xhr.<span class=\"property\">onreadystatechange</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 这里的函数异步执行，可参考之前 JS 基础中的异步模块</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (xhr.<span class=\"property\">readyState</span> === <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (xhr.<span class=\"property\">status</span> === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">alert</span>(xhr.<span class=\"property\">responseText</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">xhr.<span class=\"title function_\">send</span>(<span class=\"literal\">null</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"2、状态码说明\">2、状态码说明<a title=\"#2、状态码说明\" href=\"#2、状态码说明\"></a></h3>\n<h4 id=\"readystate\">readyState<a title=\"#readystate\" href=\"#readystate\"></a></h4>\n<p>xhr.readyState 的状态码说明</p>\n<ul>\n<li>0 - (未初始化）还没有调用send()方法</li>\n<li>1 -（载入）已调用send()方法，正在发送请求</li>\n<li>2 -（载入完成）send()方法执行完成，已经接收到全部响应内容</li>\n<li>3 -（交互）正在解析响应内容</li>\n<li>4 -（完成）响应内容解析完成，可以在客户端调用了</li>\n</ul>\n<h4 id=\"status\">status<a title=\"#status\" href=\"#status\"></a></h4>\n<ul>\n<li>2xx 表示成功处理请求</li>\n<li>3xx 需要重定向，浏览器直接跳转\n<ul>\n<li>301: 永久重定向</li>\n<li>302: 临时重定向</li>\n<li>304: 资源未改变，调用缓存资源</li>\n</ul>\n</li>\n<li>4xx 客户端请求错误\n<ul>\n<li>403: 没有权限</li>\n<li>404: 找不到地址</li>\n</ul>\n</li>\n<li>5xx 服务器端错误</li>\n</ul>\n<h3 id=\"3、跨域\">3、跨域<a title=\"#3、跨域\" href=\"#3、跨域\"></a></h3>\n<h4 id=\"同源策略\">同源策略<a title=\"#同源策略\" href=\"#同源策略\"></a></h4>\n<p>ajax 请求时，<strong>浏览器要求</strong>当前网页和 server 必须同源（安全）<br>\n同源: 协议、域名、端口，三者必须一致</p>\n<p>但是html中以下几个标签能逃避过同源策略</p>\n<ul>\n<li><code>&lt;img&gt;</code>可以做打点统计</li>\n<li><code>&lt;script&gt;</code> 和 <code>&lt;link&gt;</code> 可以使用 CDN, CDN 基本都是外域</li>\n<li><code>&lt;script&gt;</code> 还可以实现 JSONP</li>\n</ul>\n<p>所有的跨域，都必须经过 server 端允许和配合<br>\n未经 server 端允许就实现跨域，说明浏览器有漏洞，危险信号</p>\n<h4 id=\"jsonp-&amp;-cors\">JSONP &amp; CORS<a title=\"#jsonp-&amp;-cors\" href=\"#jsonp-&amp;-cors\"></a></h4>\n<p>JSONP: 利用 script 标签可以跨域以及 server 可以动态拼接内容</p>\n<p>CORS: 服务端允许跨域</p>\n<h2 id=\"五、存储\">五、存储<a title=\"#五、存储\" href=\"#五、存储\"></a></h2>\n<h3 id=\"0、面试题-2---5\">0、面试题 2 - 5<a title=\"#0、面试题-2---5\" href=\"#0、面试题-2---5\"></a></h3>\n<p><strong>请描述一下 cookie，sessionStorage 和 localStorage 的区别</strong></p>\n<ul>\n<li>容量</li>\n<li>是否会携带到 ajax 中</li>\n<li>API易用性</li>\n</ul>\n<h3 id=\"1、cookie\">1、cookie<a title=\"#1、cookie\" href=\"#1、cookie\"></a></h3>\n<ul>\n<li>本身用于浏览器和 server 通讯</li>\n<li>被“借”到本地存储来</li>\n<li>可用 document.cookie = … 获取和修改</li>\n</ul>\n<p>cookie 有它致命的缺点</p>\n<ul>\n<li>存储量太小，只有 4KB</li>\n<li>http 请求时需要发送到服务端，增加请求数据量</li>\n<li>只能用 document.cookie = … 来修改，太过简单，不直观</li>\n</ul>\n<h3 id=\"2、localstorage-和-sessionstorage\">2、localStorage 和 sessionStorage<a title=\"#2、localstorage-和-sessionstorage\" href=\"#2、localstorage-和-sessionstorage\"></a></h3>\n<ul>\n<li>HTML5 专为存储而设计，最大可存 5M</li>\n<li>API 简单易用 setItem getItem</li>\n<li>不会随 http 请求被发送出去</li>\n</ul>\n<p>区别</p>\n<ul>\n<li>localStorage 数据会永久存储，除非代码或手动删除</li>\n<li>sessionStorage 数据只存在于当前会话，浏览器关闭则清空</li>\n<li>一般用 localStorage 会更多一些</li>\n</ul>\n","prev":{"title":"开发环境与运行环境","link":"2020/03/30/imooc_115_3_new"},"next":{"title":"JS基础知识 (新版)","link":"2020/03/25/imooc_115_1_new"},"plink":"https://vincenteliang.com/2020/03/26/imooc_115_2_new/","toc":[{"id":"知识体系","title":"知识体系","index":"1"},{"id":"一、dom-document-object-model","title":"一、DOM Document Object Model","index":"2","children":[{"id":"面试题","title":"面试题","index":"2.1"},{"id":"1、dom-本质","title":"1、DOM 本质","index":"2.2"},{"id":"2、dom-节点操作","title":"2、DOM 节点操作","index":"2.3"},{"id":"3、dom-结构操作","title":"3、DOM 结构操作","index":"2.4"},{"id":"4、dom-性能","title":"4、DOM 性能","index":"2.5"}]},{"id":"二、bom","title":"二、BOM","index":"3","children":[{"id":"面试题-1","title":"面试题","index":"3.1"},{"id":"1、navigator","title":"1、navigator","index":"3.2"},{"id":"2、screen","title":"2、screen","index":"3.3"},{"id":"3、location","title":"3、location","index":"3.4"},{"id":"4、history","title":"4、history","index":"3.5"}]},{"id":"三、事件绑定","title":"三、事件绑定","index":"4","children":[{"id":"面试题-2","title":"面试题","index":"4.1"},{"id":"1、事件绑定","title":"1、事件绑定","index":"4.2"},{"id":"2、事件冒泡","title":"2、事件冒泡","index":"4.3"},{"id":"3、事件代理","title":"3、事件代理","index":"4.4"}]},{"id":"四、ajax","title":"四、ajax","index":"5","children":[{"id":"面试题-3","title":"面试题","index":"5.1"},{"id":"1、xmlhttprequest","title":"1、XMLHttpRequest","index":"5.2"},{"id":"2、状态码说明","title":"2、状态码说明","index":"5.3"},{"id":"3、跨域","title":"3、跨域","index":"5.4"}]},{"id":"五、存储","title":"五、存储","index":"6","children":[{"id":"0、面试题-2---5","title":"0、面试题 2 - 5","index":"6.1"},{"id":"1、cookie","title":"1、cookie","index":"6.2"},{"id":"2、localstorage-和-sessionstorage","title":"2、localStorage 和 sessionStorage","index":"6.3"}]}],"reward":true,"copyright":{"author":"Vincente Liang","link":"<a href=\"https://vincenteliang.com/2020/03/26/imooc_115_2_new/\" title=\"JS Web API (新版)\">https://vincenteliang.com/2020/03/26/imooc_115_2_new/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","published":"March 27, 2020","updated":"July 1, 2024"},"reading_time":"2151 words in 14 min"}