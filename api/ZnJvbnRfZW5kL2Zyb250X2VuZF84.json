{"title":"NoSQL数据库的设计与集成","date":"2020-05-04T00:00:00.000Z","date_formatted":{"ll":"May 4, 2020","L":"05/04/2020","MM-DD":"05-04"},"updated":"2024-07-01T17:57:02.542Z","content":"<p><strong><a href=\"https://www.imooc.com/\" target=\"_blank\">慕课网</a>实战课程笔记 —— <a href=\"https://class.imooc.com/sc/70/learn\" target=\"_blank\">大前端：前端全栈加强版！前端全栈+全周期+多端（升级Vue3.0）</a></strong></p>\n<h2 id=\"课程介绍\">课程介绍<a title=\"#课程介绍\" href=\"#课程介绍\"></a></h2>\n<p>本周带您解开数据之谜，学习NoSQL数据库与数据库设计原则，让您带着设计思维去设计项目数据库。掌握Redis安装、常用CLI命令，搞定Redis服务搭建与Nodejs集成</p>\n<h2 id=\"第1章-nosql数据库mongodb-认知与设计\">第1章 NoSQL数据库MongoDB 认知与设计<a title=\"#第1章-nosql数据库mongodb-认知与设计\" href=\"#第1章-nosql数据库mongodb-认知与设计\"></a></h2>\n<h3 id=\"1-1-章导读\">1-1 章导读<a title=\"#1-1-章导读\" href=\"#1-1-章导读\"></a></h3>\n<ul>\n<li>NoSQL数据库设计</li>\n<li>MongoDB安装、配置、GUI工具</li>\n<li>Nodejs中的Mongoose库</li>\n</ul>\n<h3 id=\"1-2-nosql数据库&amp;设计原则\">1-2 NoSQL数据库&amp;设计原则<a title=\"#1-2-nosql数据库&amp;设计原则\" href=\"#1-2-nosql数据库&amp;设计原则\"></a></h3>\n<p>NoSQL 意义</p>\n<ul>\n<li>易扩展，高性能，高可用</li>\n<li>较容易映射复杂数据（key-value）</li>\n<li>无事务特性要求（ACID 特性）</li>\n</ul>\n<p>数据库相关概念</p>\n<ul>\n<li>关系型数据库，是指采用了关系模型来组织数据的数据库。</li>\n<li>NoSQL 是对不同于传统的关系数据库的数据库管理系统的统称。</li>\n</ul>\n<p>NoSQL 设计</p>\n<ul>\n<li>常见场景及设计方法 (内嵌、父/子引用、反范式）</li>\n<li>双向关联的场景及设计原则</li>\n</ul>\n<p>NoSQL 常见场景</p>\n<ul>\n<li>内嵌</li>\n<li>父/子引用</li>\n<li>反范式</li>\n</ul>\n<p>什么是内嵌</p>\n<p>内嵌是指存在关联关系的文档，放在同一文档中以数组的形式存放。</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;username&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;brian&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gender&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;roles&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;admin&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;user&quot;</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;address&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"string\">&quot;address1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"string\">&quot;address2&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>内嵌设计</p>\n<ul>\n<li>减少了关联查询</li>\n<li>适合于单类需要描述的属性</li>\n<li>不经常变化的属性（扩展、嵌套关联）</li>\n</ul>\n<p>什么是子引用</p>\n<p>子引用是指存在一对非常多的情况中,由于数据库文档存放限制,这个时候进行反向引用。</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;cid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;commentid &quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;tid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;postid&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;content&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;这是回复的内容，不错不错！!!!!!!!!!&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;isread&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;isbest&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;status&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>父子引用设计</p>\n<ul>\n<li>引用数据内容是否非常多</li>\n<li>引用数据量是否非常庞大,而且在增加</li>\n<li>数据是否需要单独访问</li>\n</ul>\n<p>什么是反范式</p>\n<p>范式是指按既定的用法，范式就是一种公认的模型或模式。 <strong>反范式</strong> -&gt; <strong>不走寻常路</strong></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;tid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;postid&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;文章标题&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;created&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;1436864169&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;users&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;用户ID&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;用户称&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;isvip&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>反范式设计</p>\n<ul>\n<li>是否有提升性能的区间</li>\n<li>数据量的变化是否非常庞大，庞大到更新会异常低效</li>\n<li>先考虑读写比，才考虑反范式</li>\n</ul>\n<p>设计原则小结</p>\n<ul>\n<li>先考虑内嵌，如果单独访问，则不适合</li>\n<li>数组不应该无限制增长</li>\n<li>考虑读写比，考虑反范式，考虑应用场景</li>\n</ul>\n<h3 id=\"1-3-mongodb简介&amp;安装\">1-3 MongoDB简介&amp;安装<a title=\"#1-3-mongodb简介&amp;安装\" href=\"#1-3-mongodb简介&amp;安装\"></a></h3>\n<figure class=\"highlight yml\"><figcaption><span>docker-compose.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">mongo:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">Mongo</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">MONGOINITDB ROOT USERNAME:</span> <span class=\"string\">root</span></span><br><span class=\"line\">      <span class=\"attr\">MONGO_INITDB_ROOT_ PASSWORD:</span> <span class=\"string\">example</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">27017</span><span class=\"string\">:27017</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/home/mongotest:/data/db</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"第2章-mongodb-应用与实战\">第2章 MongoDB 应用与实战<a title=\"#第2章-mongodb-应用与实战\" href=\"#第2章-mongodb-应用与实战\"></a></h2>\n<h3 id=\"2-1-mongodb初始化配置\">2-1 MongoDB初始化配置<a title=\"#2-1-mongodb初始化配置\" href=\"#2-1-mongodb初始化配置\"></a></h3>\n<h3 id=\"2-2-介绍gui工具\">2-2 介绍GUI工具<a title=\"#2-2-介绍gui工具\" href=\"#2-2-介绍gui工具\"></a></h3>\n<h3 id=\"2-3-mongodb备份与恢复\">2-3 MongoDB备份与恢复<a title=\"#2-3-mongodb备份与恢复\" href=\"#2-3-mongodb备份与恢复\"></a></h3>\n<h3 id=\"2-4-mongoose使用简介\">2-4 Mongoose使用简介<a title=\"#2-4-mongoose使用简介\" href=\"#2-4-mongoose使用简介\"></a></h3>\n<h3 id=\"2-5-mongoose实战配置&amp;curd操作\">2-5 Mongoose实战配置&amp;CURD操作<a title=\"#2-5-mongoose实战配置&amp;curd操作\" href=\"#2-5-mongoose实战配置&amp;curd操作\"></a></h3>\n<h2 id=\"第3章-redis-认知与必备cli命令\">第3章 Redis 认知与必备CLI命令<a title=\"#第3章-redis-认知与必备cli命令\" href=\"#第3章-redis-认知与必备cli命令\"></a></h2>\n<h3 id=\"3-1-章导读\">3-1 章导读<a title=\"#3-1-章导读\" href=\"#3-1-章导读\"></a></h3>\n<h3 id=\"3-2-redis简介\">3-2 Redis简介<a title=\"#3-2-redis简介\" href=\"#3-2-redis简介\"></a></h3>\n<p>相关概念</p>\n<p>Redis 是完全开源免费的，遵守 BSD 协议，是一个高性总性能的 key-value 数据库。<br>\nRedis 与其他 key-value 缓存产品相比：支持数据的持久化，多数据结构 list, set, zset, hash 等的存储，支持数据备份。</p>\n<p>Redis特点</p>\n<ul>\n<li>高性能，可持久化</li>\n<li>key-value结构，支持多种数据类型</li>\n<li>支持事务，数据的原子性(要么不做/全做）</li>\n</ul>\n<p>Redis应用场景</p>\n<ul>\n<li>缓存（读写性能优异）</li>\n<li>计数&amp;消息系统（高并发、发布/订阅阻塞队列功能）</li>\n<li>分布式会话 sess on&amp;分布式锁（秒杀）</li>\n</ul>\n<p>Redis vs Mongo</p>\n<ul>\n<li>存储方式不一样：key-value vs Document</li>\n<li>使用方式&amp;可靠性不一样：Mongodb SQL &amp; ACID 支持</li>\n<li>应用场景不一样：高性能缓存 VS 海量数据分析</li>\n</ul>\n<h3 id=\"3-4-redis安装\">3-4 Redis安装<a title=\"#3-4-redis安装\" href=\"#3-4-redis安装\"></a></h3>\n<h3 id=\"3-6-redis常见cli命令1—取值\">3-6 Redis常见CLI命令1—取值<a title=\"#3-6-redis常见cli命令1—取值\" href=\"#3-6-redis常见cli命令1—取值\"></a></h3>\n<h3 id=\"3-9-redis常见cli命令2—发布订阅\">3-9 Redis常见CLI命令2—发布订阅<a title=\"#3-9-redis常见cli命令2—发布订阅\" href=\"#3-9-redis常见cli命令2—发布订阅\"></a></h3>\n<h3 id=\"3-11-redis常见cli命令3—服务相关&amp;备份恢复\">3-11 Redis常见CLI命令3—服务相关&amp;备份恢复<a title=\"#3-11-redis常见cli命令3—服务相关&amp;备份恢复\" href=\"#3-11-redis常见cli命令3—服务相关&amp;备份恢复\"></a></h3>\n<h2 id=\"第4章-redis-和-nodejs-集成与实践\">第4章 Redis 和 Nodejs 集成与实践<a title=\"#第4章-redis-和-nodejs-集成与实践\" href=\"#第4章-redis-和-nodejs-集成与实践\"></a></h2>\n<h3 id=\"4-1-redis的gui工具\">4-1 Redis的GUI工具<a title=\"#4-1-redis的gui工具\" href=\"#4-1-redis的gui工具\"></a></h3>\n<h3 id=\"4-2-redis实战应用配置—get&amp;set方法\">4-2 Redis实战应用配置—get&amp;set方法<a title=\"#4-2-redis实战应用配置—get&amp;set方法\" href=\"#4-2-redis实战应用配置—get&amp;set方法\"></a></h3>\n<h3 id=\"4-3-redis实战应用配置—哈希表hset&amp;hgetall\">4-3 Redis实战应用配置—哈希表hset&amp;hgetall<a title=\"#4-3-redis实战应用配置—哈希表hset&amp;hgetall\" href=\"#4-3-redis实战应用配置—哈希表hset&amp;hgetall\"></a></h3>\n<h3 id=\"4-4-redis实战应用配置-bluebird\">4-4 Redis实战应用配置-BlueBird<a title=\"#4-4-redis实战应用配置-bluebird\" href=\"#4-4-redis实战应用配置-bluebird\"></a></h3>\n","link":"front_end/front_end_8","comments":true,"plink":"https://vincenteliang.com/front_end/front_end_8/","toc":[{"id":"课程介绍","title":"课程介绍","index":"1"},{"id":"第1章-nosql数据库mongodb-认知与设计","title":"第1章 NoSQL数据库MongoDB 认知与设计","index":"2","children":[{"id":"1-1-章导读","title":"1-1 章导读","index":"2.1"},{"id":"1-2-nosql数据库&设计原则","title":"1-2 NoSQL数据库&amp;设计原则","index":"2.2"},{"id":"1-3-mongodb简介&安装","title":"1-3 MongoDB简介&amp;安装","index":"2.3"}]},{"id":"第2章-mongodb-应用与实战","title":"第2章 MongoDB 应用与实战","index":"3","children":[{"id":"2-1-mongodb初始化配置","title":"2-1 MongoDB初始化配置","index":"3.1"},{"id":"2-2-介绍gui工具","title":"2-2 介绍GUI工具","index":"3.2"},{"id":"2-3-mongodb备份与恢复","title":"2-3 MongoDB备份与恢复","index":"3.3"},{"id":"2-4-mongoose使用简介","title":"2-4 Mongoose使用简介","index":"3.4"},{"id":"2-5-mongoose实战配置&curd操作","title":"2-5 Mongoose实战配置&amp;CURD操作","index":"3.5"}]},{"id":"第3章-redis-认知与必备cli命令","title":"第3章 Redis 认知与必备CLI命令","index":"4","children":[{"id":"3-1-章导读","title":"3-1 章导读","index":"4.1"},{"id":"3-2-redis简介","title":"3-2 Redis简介","index":"4.2"},{"id":"3-4-redis安装","title":"3-4 Redis安装","index":"4.3"},{"id":"3-6-redis常见cli命令1—取值","title":"3-6 Redis常见CLI命令1—取值","index":"4.4"},{"id":"3-9-redis常见cli命令2—发布订阅","title":"3-9 Redis常见CLI命令2—发布订阅","index":"4.5"},{"id":"3-11-redis常见cli命令3—服务相关&备份恢复","title":"3-11 Redis常见CLI命令3—服务相关&amp;备份恢复","index":"4.6"}]},{"id":"第4章-redis-和-nodejs-集成与实践","title":"第4章 Redis 和 Nodejs 集成与实践","index":"5","children":[{"id":"4-1-redis的gui工具","title":"4-1 Redis的GUI工具","index":"5.1"},{"id":"4-2-redis实战应用配置—get&set方法","title":"4-2 Redis实战应用配置—get&amp;set方法","index":"5.2"},{"id":"4-3-redis实战应用配置—哈希表hset&hgetall","title":"4-3 Redis实战应用配置—哈希表hset&amp;hgetall","index":"5.3"},{"id":"4-4-redis实战应用配置-bluebird","title":"4-4 Redis实战应用配置-BlueBird","index":"5.4"}]}],"reward":true,"copyright":{"author":"Vincente Liang","link":"<a href=\"https://vincenteliang.com/front_end/front_end_8/\" title=\"NoSQL数据库的设计与集成\">https://vincenteliang.com/front_end/front_end_8/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","published":"May 4, 2020","updated":"July 1, 2024"}}