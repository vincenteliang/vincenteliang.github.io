{"title":"正则表达式","date":"2019-03-15T00:00:00.000Z","date_formatted":{"ll":"Mar 15, 2019","L":"03/15/2019","MM-DD":"03-15"},"thumbnail":"https://blog-1251959181.cos.accelerate.myqcloud.com/RegEx.jpg","link":"2019/03/14/RegEx","comments":true,"tags":["Note"],"categories":["Coding"],"updated":"2024-07-01T17:57:02.534Z","content":"<p><strong>原帖：<a href=\"https://www.jb51.net/tools/zhengze.html\" target=\"_blank\">正则表达式30分钟入门教程</a></strong></p>\n<h2 id=\"入门\">入门<a title=\"#入门\" href=\"#入门\"></a></h2>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"text-align:center\">元字符：meta character</th>\n<th style=\"text-align:center\">意义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><code>\\b</code></td>\n<td style=\"text-align:center\">单词的开头或结尾，也就是单词的分界处。并不匹配某种分隔符，它只匹配一个位置</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>.</code></td>\n<td style=\"text-align:center\">除了换行符以外的任意字符</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>*</code></td>\n<td style=\"text-align:center\"><code>*</code>前边的内容可以连续重复使用任意次（包括零）</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>.*</code></td>\n<td style=\"text-align:center\">任意数量的不包含换行的字符</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>\\d</code></td>\n<td style=\"text-align:center\">一位数字(0，或1，或2，或……)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>\\d&#123;8&#125;</code></td>\n<td style=\"text-align:center\"><code>\\d</code>必须连续重复匹配8次</td>\n</tr>\n</tbody>\n</table></div></div><h2 id=\"元字符\">元字符<a title=\"#元字符\" href=\"#元字符\"></a></h2>\n<p>示例：</p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"text-align:center\">代码</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><code>\\w*</code></td>\n<td style=\"text-align:center\">然后是任意数量的字母或数字</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>\\ba\\w*\\b</code></td>\n<td style=\"text-align:center\">以字母a开头的单词</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>\\b\\w&#123;6&#125;\\b</code></td>\n<td style=\"text-align:center\">匹配刚好6个字符的单词</td>\n</tr>\n</tbody>\n</table></div></div><p>常用的元字符</p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"text-align:center\">代码</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><code>.</code></td>\n<td style=\"text-align:center\">除换行符以外的任意字符</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>\\w</code></td>\n<td style=\"text-align:center\">字母或数字或下划线或汉字</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>\\s</code></td>\n<td style=\"text-align:center\">任意的空白符</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>\\d</code></td>\n<td style=\"text-align:center\">一位数字</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>\\b</code></td>\n<td style=\"text-align:center\">单词的开始或结束</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>^</code></td>\n<td style=\"text-align:center\">字符串的开始</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>$</code></td>\n<td style=\"text-align:center\">字符串的结束</td>\n</tr>\n</tbody>\n</table></div></div><p>示例：</p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"text-align:center\">代码</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><code>+</code></td>\n<td style=\"text-align:center\"><code>+</code>前边的内容重复1次或更多次</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>\\d+</code></td>\n<td style=\"text-align:center\">1个或更多连续的数字</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>^</code></td>\n<td style=\"text-align:center\">字符串开头/行的开始</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>$</code></td>\n<td style=\"text-align:center\">字符串结尾/行的结束</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>^\\d&#123;5,12&#125;$</code></td>\n<td style=\"text-align:center\">5位到12位数字</td>\n</tr>\n</tbody>\n</table></div></div><h2 id=\"字符转义\">字符转义<a title=\"#字符转义\" href=\"#字符转义\"></a></h2>\n<p>通过转义字符<code>\\</code>查找元字符本身</p>\n<h2 id=\"重复\">重复<a title=\"#重复\" href=\"#重复\"></a></h2>\n<p>常用的限定符</p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"text-align:center\">代码/语法</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><code>*</code></td>\n<td style=\"text-align:center\">重复零次或更多次</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>+</code></td>\n<td style=\"text-align:center\">重复一次或更多次</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>?</code></td>\n<td style=\"text-align:center\">重复零次或一次</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>&#123;n&#125;</code></td>\n<td style=\"text-align:center\">重复n次</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>&#123;n,&#125;</code></td>\n<td style=\"text-align:center\">重复n次或更多次</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>&#123;n,m&#125;</code></td>\n<td style=\"text-align:center\">重复n到m次</td>\n</tr>\n</tbody>\n</table></div></div><p>示例：</p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"text-align:center\">代码</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><code>Windows\\d+</code></td>\n<td style=\"text-align:center\">Windows后面跟1个或更多数字</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>^\\w+</code></td>\n<td style=\"text-align:center\">一行的第一个单词（或整个字符串的第一个单词）</td>\n</tr>\n</tbody>\n</table></div></div><h2 id=\"字符类\">字符类<a title=\"#字符类\" href=\"#字符类\"></a></h2>\n<p>示例：</p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"text-align:center\">代码</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><code>[aeiou]</code></td>\n<td style=\"text-align:center\">任何一个英文元音字母</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>[0-9]</code></td>\n<td style=\"text-align:center\">与<code>\\d</code>就是完全一致的：一位数字</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>\\(?0\\d&#123;2&#125;[) -]?\\d&#123;8&#125;</code></td>\n<td style=\"text-align:center\">几种格式的电话号码，像(010)88886666，或022-22334455，或02912345678等</td>\n</tr>\n</tbody>\n</table></div></div><h2 id=\"分支条件\">分支条件<a title=\"#分支条件\" href=\"#分支条件\"></a></h2>\n<p>刚才那个表达式也能匹配010)12345678或(022-87654321这样的“不正确”的格式。要解决这个问题，我们需要用到分枝条件。正则表达式里的分枝条件指的是有几种规则，如果满足其中任意一种规则都应该当成匹配，具体方法是用|把不同的规则分隔开。</p>\n<p>示例：</p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"text-align:center\">代码</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">`0\\d{2}-\\d{8}</td>\n<td style=\"text-align:center\">0\\d{3}-\\d{7}`</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">`(0\\d{2})[- ]?\\d{8}</td>\n<td style=\"text-align:center\">0\\d{2}[- ]?\\d{8}`</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">`\\d{5}-\\d{4}</td>\n<td style=\"text-align:center\">\\d{5}`</td>\n</tr>\n</tbody>\n</table></div></div><p>使用分枝条件时，要注意各个条件的顺序。如果你把它改成<code>\\d&#123;5&#125;|\\d&#123;5&#125;-\\d&#123;4&#125;</code>的话，那么就只会匹配5位的邮编(以及9位邮编的前5位)。原因是匹配分枝条件时，将会从左到右地测试每个条件，如果满足了某个分枝的话，就不会去再管其它的条件了。</p>\n<h2 id=\"分组\">分组<a title=\"#分组\" href=\"#分组\"></a></h2>\n<p>我们已经提到了怎么重复单个字符（直接在字符后面加上限定符就行了）；但如果想要重复多个字符又该怎么办？你可以用小括号来指定子表达式(也叫做分组)，然后你就可以指定这个子表达式的重复次数了。</p>\n<p>示例：</p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"text-align:center\">代码</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><code>(\\d&#123;1,3&#125;\\.)&#123;3&#125;\\d&#123;1,3&#125;</code></td>\n<td style=\"text-align:center\">简单的IP地址匹配。<code>(\\d&#123;1,3&#125;\\.)&#123;3&#125;</code>匹配三位数字加上一个英文句号(这个整体也就是这个分组)重复3次</td>\n</tr>\n</tbody>\n</table></div></div><h2 id=\"反义\">反义<a title=\"#反义\" href=\"#反义\"></a></h2>\n<p>常用的反义代码</p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"text-align:center\">代码/语法</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><code>\\W</code></td>\n<td style=\"text-align:center\">匹配任意不是字母，数字，下划线，汉字的字符</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>\\S</code></td>\n<td style=\"text-align:center\">匹配任意不是空白符的字符</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>\\D</code></td>\n<td style=\"text-align:center\">匹配任意非数字的字符</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>\\B</code></td>\n<td style=\"text-align:center\">匹配不是单词开头或结束的位置</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>[^x]</code></td>\n<td style=\"text-align:center\">匹配除了x以外的任意字符</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>[^aeiou]</code></td>\n<td style=\"text-align:center\">匹配除了aeiou这几个字母以外的任意字符</td>\n</tr>\n</tbody>\n</table></div></div><p>示例：</p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"text-align:center\">代码</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><code>\\S+</code></td>\n<td style=\"text-align:center\">不包含空白符的字符串</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>&lt;a[^&gt;]+&gt;</code></td>\n<td style=\"text-align:center\">用尖括号括起来的以a开头的字符串</td>\n</tr>\n</tbody>\n</table></div></div><h2 id=\"替换\">替换<a title=\"#替换\" href=\"#替换\"></a></h2>\n<p>在正则表达式中用括号括起来的代表一部分，在替换时可以用<code>$1</code>引用</p>\n<p>比如举个经典的🌰，把文章中所有的章标题前面加上<code>## </code>变成md格式的二级标题：</p>\n<p>已知章标题格式为：第1章 ……</p>\n<p>搜索：<code>第(\\d)章</code><br>\n替换：<code>## 第$1章</code></p>\n<!-- ## imooc\n\n将\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">第(\\d*)章 (.*)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>替换为</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">## 第$1章 $2</span><br><span class=\"line\"></span><br><span class=\"line\">&gt; </span><br></pre></td></tr></table></figure>\n<p>将</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(\\d*)-(\\d*) (.*)</span><br></pre></td></tr></table></figure>\n<p>替换为</p>\n<pre><code>### $1-$2 $3\n\n``` --&gt;</code></pre>\n","prev":{"title":"Python进阶","link":"2019/04/25/imooc_136_2"},"next":{"title":"24个CSS高级技巧合集","link":"2019/03/13/syl_CSS_skill_24"},"plink":"https://vincenteliang.com/2019/03/14/RegEx/","toc":[{"id":"入门","title":"入门","index":"1"},{"id":"元字符","title":"元字符","index":"2"},{"id":"字符转义","title":"字符转义","index":"3"},{"id":"重复","title":"重复","index":"4"},{"id":"字符类","title":"字符类","index":"5"},{"id":"分支条件","title":"分支条件","index":"6"},{"id":"分组","title":"分组","index":"7"},{"id":"反义","title":"反义","index":"8"},{"id":"替换","title":"替换","index":"9"}],"reward":true,"copyright":{"author":"Vincente Liang","link":"<a href=\"https://vincenteliang.com/2019/03/14/RegEx/\" title=\"正则表达式\">https://vincenteliang.com/2019/03/14/RegEx/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","published":"March 15, 2019","updated":"July 1, 2024"},"reading_time":"1068 words in 7 min"}