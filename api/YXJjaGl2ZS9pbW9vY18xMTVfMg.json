{"title":"JS-Web-API","date":"2019-07-19T00:00:00.000Z","date_formatted":{"ll":"Jul 19, 2019","L":"07/19/2019","MM-DD":"07-19"},"updated":"2024-07-01T17:57:02.542Z","content":"<p><strong><a href=\"https://www.imooc.com/\" target=\"_blank\">慕课网</a>实战课程笔记 —— <a href=\"https://coding.imooc.com/class/115.html\" target=\"_blank\">前端JavaScript面试技巧</a></strong></p>\n<blockquote>\n<p>W3C 标准</p>\n</blockquote>\n<h2 id=\"一、dom-操作\">一、DOM 操作<a title=\"#一、dom-操作\" href=\"#一、dom-操作\"></a></h2>\n<p>DOM: Document Object Model 文档对象模型</p>\n<h3 id=\"0、面试题-2---1\">0、面试题 2 - 1<a title=\"#0、面试题-2---1\" href=\"#0、面试题-2---1\"></a></h3>\n<ol>\n<li>DOM 是哪种基本的数据结构<br>\n树</li>\n<li>DOM 操作的常用 API 有哪些\n<ul>\n<li>获取节点，以及获取节点的 Attribute 和 property</li>\n<li>获取父节点 获取子节点</li>\n<li>新增节点，删除节点</li>\n</ul>\n</li>\n<li>DOM 节点的 attr 和 property 有何区别\n<ul>\n<li>property 只是一个 JS 对象的属性的修改</li>\n<li>attr 是对 html 标签属性的修改</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"1、dom-本质\">1、DOM 本质<a title=\"#1、dom-本质\" href=\"#1、dom-本质\"></a></h3>\n<p>浏览器把拿到的 html 代码结构化成一个浏览器能识别并且 js 可操作的一个模型<br>\n数据结构：树</p>\n<h3 id=\"2、dom-节点操作\">2、DOM 节点操作<a title=\"#2、dom-节点操作\" href=\"#2、dom-节点操作\"></a></h3>\n<ul>\n<li>获取 DOM 节点</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> div1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;div1&#x27;</span>)  <span class=\"comment\">// 元素</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> divList = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementByTagName</span>(<span class=\"string\">&#x27;div&#x27;</span>)   <span class=\"comment\">// 集合</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> containerList = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementByClassName</span>(<span class=\"string\">&#x27;.container&#x27;</span>)    <span class=\"comment\">// 集合</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> pList = <span class=\"variable language_\">document</span>.<span class=\"title function_\">quertySelectorAll</span>(<span class=\"string\">&#x27;p&#x27;</span>) <span class=\"comment\">// 集合</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>prperty: 获取 js 对象的属性</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> pList = <span class=\"variable language_\">document</span>.<span class=\"title function_\">quertySelectorAll</span>(<span class=\"string\">&#x27;p&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = pList[<span class=\"number\">0</span>]</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(p.<span class=\"property\">style</span>.<span class=\"property\">width</span>)  <span class=\"comment\">// 获取样式</span></span><br><span class=\"line\">p.<span class=\"property\">style</span>.<span class=\"property\">width</span> = <span class=\"string\">&#x27;100px&#x27;</span>     <span class=\"comment\">// 修改样式</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(p.<span class=\"property\">className</span>)    <span class=\"comment\">// 获取 class</span></span><br><span class=\"line\">p.<span class=\"property\">className</span> = <span class=\"string\">&#x27;p1&#x27;</span>          <span class=\"comment\">// 修改 class</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(p.<span class=\"property\">nodeName</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(p.<span class=\"property\">nodeType</span>)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>Attribute: 获取 html 标签中定义的属性，如内联样式表</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> pList = <span class=\"variable language_\">document</span>.<span class=\"title function_\">quertySelectorAll</span>(<span class=\"string\">&#x27;p&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = pList[<span class=\"number\">0</span>]</span><br><span class=\"line\">p.<span class=\"title function_\">getAttribute</span>(<span class=\"string\">&#x27;data-name&#x27;</span>)</span><br><span class=\"line\">p.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&#x27;data-name&#x27;</span>, <span class=\"string\">&#x27;imooc&#x27;</span>)</span><br><span class=\"line\">p.<span class=\"title function_\">getAttribute</span>(<span class=\"string\">&#x27;style&#x27;</span>)</span><br><span class=\"line\">p.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&#x27;style&#x27;</span>, <span class=\"string\">&#x27;font-size:30px;&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"3、dom-结构操作\">3、DOM 结构操作<a title=\"#3、dom-结构操作\" href=\"#3、dom-结构操作\"></a></h3>\n<ul>\n<li>新增节点</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> div1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;div1&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// 添加新节点</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> p1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&#x27;p&#x27;</span>)</span><br><span class=\"line\">p1.<span class=\"property\">innerHTML</span> = <span class=\"string\">&#x27;this is p1&#x27;</span></span><br><span class=\"line\">div1.<span class=\"title function_\">appendChild</span>(p1) <span class=\"comment\">// 添加新创建的元素</span></span><br><span class=\"line\"><span class=\"comment\">// 移动已有节点</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> p2 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;p2&#x27;</span>)</span><br><span class=\"line\">div1.<span class=\"title function_\">appendChild</span>(p2)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>获取父元素</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> div1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;div1&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> parent = div1.<span class=\"property\">parentElement</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>获取子元素</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> div1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;div1&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> child = div1.<span class=\"property\">childNodes</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>删除节点</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> div1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;div1&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> child = div1.<span class=\"property\">childNodes</span></span><br><span class=\"line\">div1.<span class=\"title function_\">removeChild</span>(child[<span class=\"number\">0</span>])</span><br></pre></td></tr></table></figure>\n<h2 id=\"二、bom-操作\">二、BOM 操作<a title=\"#二、bom-操作\" href=\"#二、bom-操作\"></a></h2>\n<p>BOM: Browser Object Model 浏览器对象模型</p>\n<h3 id=\"0、面试题-2--2\">0、面试题 2 -2<a title=\"#0、面试题-2--2\" href=\"#0、面试题-2--2\"></a></h3>\n<p>如何检测浏览器的类型</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> ua = navigator.<span class=\"property\">userAgent</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> isChrome = ua.<span class=\"title function_\">indexOf</span>(<span class=\"string\">&#x27;Chrome&#x27;</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(isChrome)</span><br></pre></td></tr></table></figure>\n<p>拆解url的各部分</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">href</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">protocol</span>) <span class=\"comment\">// &#x27;http:&#x27; &#x27;https:&#x27;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">host</span>) <span class=\"comment\">// &#x27;coding.imooc.com&#x27;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">pathname</span>) <span class=\"comment\">// &#x27;/lesson/115&#x27;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">search</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">hash</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"1、navigator\">1、navigator<a title=\"#1、navigator\" href=\"#1、navigator\"></a></h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> ua = navigator.<span class=\"property\">userAgent</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> isChrome = ua.<span class=\"title function_\">indexOf</span>(<span class=\"string\">&#x27;Chrome&#x27;</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(isChrome)</span><br></pre></td></tr></table></figure>\n<h3 id=\"2、screen\">2、screen<a title=\"#2、screen\" href=\"#2、screen\"></a></h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(screen.<span class=\"property\">width</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(screen.<span class=\"property\">height</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"3、location\">3、location<a title=\"#3、location\" href=\"#3、location\"></a></h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">href</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">protocol</span>) <span class=\"comment\">// &#x27;http:&#x27; &#x27;https:&#x27;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">host</span>) <span class=\"comment\">// &#x27;coding.imooc.com&#x27;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">pathname</span>) <span class=\"comment\">// &#x27;/lesson/115&#x27;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">search</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(location.<span class=\"property\">hash</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"4、history\">4、history<a title=\"#4、history\" href=\"#4、history\"></a></h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">history.<span class=\"title function_\">back</span>()</span><br><span class=\"line\">history.<span class=\"title function_\">forward</span>()</span><br></pre></td></tr></table></figure>\n<h2 id=\"三、事件绑定\">三、事件绑定<a title=\"#三、事件绑定\" href=\"#三、事件绑定\"></a></h2>\n<h3 id=\"0、面试题-2---3\">0、面试题 2 - 3<a title=\"#0、面试题-2---3\" href=\"#0、面试题-2---3\"></a></h3>\n<ol>\n<li>编写一个通用的事件监听函数</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">bindEvent</span>(<span class=\"params\">elem, type, selector, fn</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (fn == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        fn = selector</span><br><span class=\"line\">        selector = <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    elem.<span class=\"title function_\">addEventListener</span>(type, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> target</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (selector) &#123;</span><br><span class=\"line\">            target = e.<span class=\"property\">target</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (target.<span class=\"title function_\">matches</span>(selector)) &#123;</span><br><span class=\"line\">                fn.<span class=\"title function_\">call</span>(target, e)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"title function_\">fn</span>(e)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>描述 DOM 事件冒泡流程\n<ul>\n<li>DOM 树形结构</li>\n<li>事件会顺着触发元素网上冒泡</li>\n</ul>\n</li>\n<li>对于一个无线下拉加载图片的页面，如何给每个图片绑定事件<br>\n使用代理，优点\n<ul>\n<li>使代码简洁</li>\n<li>减少浏览器的内存占用</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"1、通用事件绑定\">1、通用事件绑定<a title=\"#1、通用事件绑定\" href=\"#1、通用事件绑定\"></a></h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 原生事件绑定</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> btn = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;btn1&#x27;</span>)</span><br><span class=\"line\">btn.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">event</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;clicked&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 通用事件绑定</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">bindEvent</span>(<span class=\"params\">elem, type, fn</span>) &#123;</span><br><span class=\"line\">    elem.<span class=\"title function_\">addEventListener</span>(type, fn)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;link1&#x27;</span>)</span><br><span class=\"line\"><span class=\"title function_\">bindEvent</span>(a, <span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">    e.<span class=\"title function_\">preventDefault</span>() <span class=\"comment\">// 阻止默认行为</span></span><br><span class=\"line\">    <span class=\"title function_\">alert</span>(<span class=\"string\">&#x27;clicked&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 完善通用事件绑定，加入事件代理</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">bindEvent</span>(<span class=\"params\">elem, type, selector, fn</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (fn == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        fn = selector</span><br><span class=\"line\">        selector = <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    elem.<span class=\"title function_\">addEventListener</span>(type, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> target</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (selector) &#123;</span><br><span class=\"line\">            target = e.<span class=\"property\">target</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (target.<span class=\"title function_\">matches</span>(selector)) &#123;</span><br><span class=\"line\">                fn.<span class=\"title function_\">call</span>(target, e)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"title function_\">fn</span>(e)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"2、事件冒泡\">2、事件冒泡<a title=\"#2、事件冒泡\" href=\"#2、事件冒泡\"></a></h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;div1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p1&quot;</span>&gt;</span>激活<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p2&quot;</span>&gt;</span>取消<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p3&quot;</span>&gt;</span>取消<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p4&quot;</span>&gt;</span>取消<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;div2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p5&quot;</span>&gt;</span>取消<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p6&quot;</span>&gt;</span>取消<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">var</span> p1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;p1&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">var</span> body = <span class=\"variable language_\">document</span>.<span class=\"property\">body</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"title function_\">bindEvent</span>(p1, <span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    e.<span class=\"title function_\">stopPropatation</span>() <span class=\"comment\">// 注释掉这一行，来体会事件冒泡</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">alert</span>(<span class=\"string\">&#x27;激活&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"title function_\">bindEvent</span>(body, <span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">alert</span>(<span class=\"string\">&#x27;取消&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"3、代理\">3、代理<a title=\"#3、代理\" href=\"#3、代理\"></a></h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;div1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>a1<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>a2<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>a3<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>a4<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span>&gt;</span>点击增加一个 a 标签<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">var</span> div1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;div1&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">div1.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">var</span> target = e.<span class=\"property\">target</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">if</span> (e.<span class=\"property\">nodeName</span> === <span class=\"string\">&#x27;A&#x27;</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">alert</span>(target.<span class=\"property\">innerHTML</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"四、ajax-请求（包括-http-协议）\">四、ajax 请求（包括 http 协议）<a title=\"#四、ajax-请求（包括-http-协议）\" href=\"#四、ajax-请求（包括-http-协议）\"></a></h2>\n<h3 id=\"0、面试题-2---4\">0、面试题 2 - 4<a title=\"#0、面试题-2---4\" href=\"#0、面试题-2---4\"></a></h3>\n<ol>\n<li>手动编写一个 ajax，不依赖第三方库</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> <span class=\"title class_\">XMLHttpRequest</span>()</span><br><span class=\"line\">xhr.<span class=\"title function_\">open</span>(<span class=\"string\">&quot;GET&quot;</span>, <span class=\"string\">&quot;/api&quot;</span>, <span class=\"literal\">false</span>)</span><br><span class=\"line\">xhr.<span class=\"property\">onreadystatechange</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 这里的函数异步执行，可参考之前 JS 基础中的异步模块</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (xhr.<span class=\"property\">readyState</span> == <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (xhr.<span class=\"property\">status</span> == <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">alert</span>(xhr.<span class=\"property\">responseText</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">xhr.<span class=\"title function_\">send</span>(<span class=\"literal\">null</span>)</span><br></pre></td></tr></table></figure>\n<ol>\n<li>跨域的几种实现方式\n<ul>\n<li>JSONP</li>\n<li>服务器端设置 http header</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"1、xmlhttprequest\">1、XMLHttpRequest<a title=\"#1、xmlhttprequest\" href=\"#1、xmlhttprequest\"></a></h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> <span class=\"title class_\">XMLHttpRequest</span>()</span><br><span class=\"line\">xhr.<span class=\"title function_\">open</span>(<span class=\"string\">&quot;GET&quot;</span>, <span class=\"string\">&quot;/api&quot;</span>, <span class=\"literal\">false</span>)</span><br><span class=\"line\">xhr.<span class=\"property\">onreadystatechange</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 这里的函数异步执行，可参考之前 JS 基础中的异步模块</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (xhr.<span class=\"property\">readyState</span> == <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (xhr.<span class=\"property\">status</span> == <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">alert</span>(xhr.<span class=\"property\">responseText</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">xhr.<span class=\"title function_\">send</span>(<span class=\"literal\">null</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"2、状态码说明\">2、状态码说明<a title=\"#2、状态码说明\" href=\"#2、状态码说明\"></a></h3>\n<h4 id=\"readystate\">readyState<a title=\"#readystate\" href=\"#readystate\"></a></h4>\n<p>xhr.readyState 的状态码说明</p>\n<ul>\n<li>0 - (未初始化）还没有调用send()方法</li>\n<li>1 -（载入）已调用send()方法，正在发送请求</li>\n<li>2 -（载入完成）send()方法执行完成，已经接收到全部响应内容</li>\n<li>3 -（交互）正在解析响应内容</li>\n<li>4 -（完成）响应内容解析完成，可以在客户端调用了</li>\n</ul>\n<h4 id=\"status\">status<a title=\"#status\" href=\"#status\"></a></h4>\n<ul>\n<li>2xx 表示成功处理请求</li>\n<li>3xx 需要重定向，浏览器直接跳转</li>\n<li>4xx 客户端请求错误</li>\n<li>5xx 服务器端错误</li>\n</ul>\n<h3 id=\"3、跨域\">3、跨域<a title=\"#3、跨域\" href=\"#3、跨域\"></a></h3>\n<p>浏览器中有“同源策略”，即一个域下的页面中，无法通过 ajax 获取到其他域的接口。例如慕课网有一个接口<code>http://m.imooc.com/course/ajaxcourserecom?cid=459</code>，你自己的一个页面<code>http://www.yourname.com/page1.html</code>中的 ajax 无法获取这个接口。这正是命中了“同源策略”。如果浏览器哪些地方忽略了同源策略，那就是浏览器的安全漏洞，需要紧急修复。</p>\n<p>url 中以下地方有一处不同就算作跨域</p>\n<ul>\n<li>协议</li>\n<li>域名</li>\n<li>端口</li>\n</ul>\n<p>但是html中以下几个标签能逃避过同源策略</p>\n<ul>\n<li><code>&lt;script src=&quot;xxx&quot;&gt;</code></li>\n<li><code>&lt;img src=&quot;xxxx&quot;/&gt;</code></li>\n<li><code>&lt;link href=&quot;xxxx&quot;&gt;</code></li>\n</ul>\n<p>这些标签的 src/href 可以加载其他域的资源，不受同源策略限制。<br>\n因此，这是三个标签可以做一些特殊的事情。</p>\n<ul>\n<li><code>&lt;img&gt;</code>可以做打点统计，因为统计方并不一定是同域的，在讲解JS基础知识异步的时候有过代码示例。除了能跨域之外，<code>&lt;img&gt;</code> 几乎没有浏览器兼容问题，它是一个非常古老的标签。</li>\n<li><code>&lt;script&gt;</code> 和 <code>&lt;link&gt;</code> 可以使用CDN，CDN基本都是其他域的链接。</li>\n<li><code>&lt;script&gt;</code> 还可以实现JSONP，能获取其他域接口的信息，接下来马上讲解。</li>\n</ul>\n<p>注意，所有的跨域请求方式，最终都需要信息提供方来做出相应的支持和改动，也就是要经过信息提供方的同意才行，否则接收方是无法得到他们的信息的，浏览器是不允许的。</p>\n<h2 id=\"五、存储\">五、存储<a title=\"#五、存储\" href=\"#五、存储\"></a></h2>\n<h3 id=\"0、面试题-2---5\">0、面试题 2 - 5<a title=\"#0、面试题-2---5\" href=\"#0、面试题-2---5\"></a></h3>\n<ol>\n<li>请描述一下 cookie，sessionStorage 和 localStorage 的区别\n<ul>\n<li>容量</li>\n<li>是否会携带到 ajax 中</li>\n<li>API易用性</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"1、cookie\">1、cookie<a title=\"#1、cookie\" href=\"#1、cookie\"></a></h3>\n<ul>\n<li>本身用于服务器和客户端通信</li>\n<li>但是它有本地存储功能于是被“借用”</li>\n<li>使用 document.cookie = … 即可获取和修改</li>\n<li>cookie 有它致命的缺点：\n<ul>\n<li>存储量太小，只有 4KB</li>\n<li>所有 http 请求都带着，会影响获取资源的效率</li>\n<li>API 简单，需要封装才能用</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2、locationstorage-和-sessionstorage\">2、locationStorage 和 sessionStorage<a title=\"#2、locationstorage-和-sessionstorage\" href=\"#2、locationstorage-和-sessionstorage\"></a></h3>\n<p>localStorage 是专门为了浏览器端缓存而设计的，其优点有：</p>\n<ul>\n<li>存储量增大到 5M</li>\n<li>不会带到 http 请求中</li>\n<li>API 适用于数据存储\n<ul>\n<li><code>localStorage.setItem(key, value)</code></li>\n<li><code>localStorage.getItem(key)</code></li>\n</ul>\n</li>\n</ul>\n<p>sessionStorage 的区别就在于它是根据 session 过去时间而实现，而 localStorage 会永久有效，应用场景不同。例如，一些重要信息需要及时失效的放在 sessionStorage 中，一些不重要但是不经常设置的信息，放在 localStorage</p>\n","link":"archive/imooc_115_2","comments":true,"plink":"https://vincenteliang.com/archive/imooc_115_2/","toc":[{"id":"一、dom-操作","title":"一、DOM 操作","index":"1","children":[{"id":"0、面试题-2---1","title":"0、面试题 2 - 1","index":"1.1"},{"id":"1、dom-本质","title":"1、DOM 本质","index":"1.2"},{"id":"2、dom-节点操作","title":"2、DOM 节点操作","index":"1.3"},{"id":"3、dom-结构操作","title":"3、DOM 结构操作","index":"1.4"}]},{"id":"二、bom-操作","title":"二、BOM 操作","index":"2","children":[{"id":"0、面试题-2--2","title":"0、面试题 2 -2","index":"2.1"},{"id":"1、navigator","title":"1、navigator","index":"2.2"},{"id":"2、screen","title":"2、screen","index":"2.3"},{"id":"3、location","title":"3、location","index":"2.4"},{"id":"4、history","title":"4、history","index":"2.5"}]},{"id":"三、事件绑定","title":"三、事件绑定","index":"3","children":[{"id":"0、面试题-2---3","title":"0、面试题 2 - 3","index":"3.1"},{"id":"1、通用事件绑定","title":"1、通用事件绑定","index":"3.2"},{"id":"2、事件冒泡","title":"2、事件冒泡","index":"3.3"},{"id":"3、代理","title":"3、代理","index":"3.4"}]},{"id":"四、ajax-请求（包括-http-协议）","title":"四、ajax 请求（包括 http 协议）","index":"4","children":[{"id":"0、面试题-2---4","title":"0、面试题 2 - 4","index":"4.1"},{"id":"1、xmlhttprequest","title":"1、XMLHttpRequest","index":"4.2"},{"id":"2、状态码说明","title":"2、状态码说明","index":"4.3"},{"id":"3、跨域","title":"3、跨域","index":"4.4"}]},{"id":"五、存储","title":"五、存储","index":"5","children":[{"id":"0、面试题-2---5","title":"0、面试题 2 - 5","index":"5.1"},{"id":"1、cookie","title":"1、cookie","index":"5.2"},{"id":"2、locationstorage-和-sessionstorage","title":"2、locationStorage 和 sessionStorage","index":"5.3"}]}],"reward":true,"copyright":{"author":"Vincente Liang","link":"<a href=\"https://vincenteliang.com/archive/imooc_115_2/\" title=\"JS-Web-API\">https://vincenteliang.com/archive/imooc_115_2/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","published":"July 19, 2019","updated":"July 1, 2024"}}